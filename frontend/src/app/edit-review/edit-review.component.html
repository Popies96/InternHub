<div class="review-form-container">
  <h2>Edit Review</h2>

  <form [formGroup]="reviewForm" (ngSubmit)="onSubmit()" class="review-form">

    <!-- Hidden Reviewer ID -->

    <!-- Comment Field -->
    <div class="form-group">
      <label for="comment">Comment*</label>
      <textarea
        id="comment"
        formControlName="comment"
        rows="5"
        class="form-control"
        placeholder="Edit your comment..."></textarea>
      <div *ngIf="reviewForm.get('comment')?.touched && reviewForm.get('comment')?.invalid" class="error-message">
        <span *ngIf="reviewForm.get('comment')?.errors?.['required']">Comment is required</span>
        <span *ngIf="reviewForm.get('comment')?.errors?.['maxlength']">Max 1000 characters allowed</span>
      </div>
    </div>

    <!-- Scores Section -->
    <div formArrayName="scores">
      <div
        *ngFor="let scoreGroup of scores.controls; let i = index"
        [formGroupName]="i"
        class="score-group">

        <div class="form-group">
          <label>Criteria*</label>
          <select formControlName="criteria" class="form-control">
            <option value="" disabled>Select criteria</option>
            <option *ngFor="let criteria of ratingCriteria" [value]="criteria">{{ criteria }}</option>
          </select>
        </div>

        <div class="form-group">
          <label>Score (1â€“5)*</label>
          <input type="number" min="1" max="5" class="form-control" formControlName="score" />
        </div>

        <button type="button" class="btn btn-remove" (click)="removeScore(i)" *ngIf="scores.length > 1">Remove</button>
      </div>
    </div>

    <button type="button" class="btn btn-secondary" (click)="addScore()">Add Score</button>

    <!-- Submit -->
    <div class="form-actions">
      <button type="submit" class="btn btn-submit" [disabled]="reviewForm.invalid">Update Review</button>
    </div>

  </form>
</div>
